<?xml version="1.0" encoding="UTF-8" ?>
<openerp>
    <data>
        <record id="view_hr_report_common_tree" model="ir.ui.view">
            <field name="name">hr.common.report.tree</field>
            <field name="model">hr.common.report</field>
            <field name="arch" type="xml">
                <tree colors="grey:state in ['cancel','paid'] ;blue:state in ['draft','confirm'] " string="Rapports">
                    <field  name="date_from"/>
                    <field  name="date_to"/>
                    <field  name="type_id"/>
                    <field  name="voucher_ref"/>
                    <field  name="voucher_date"/>
                    <field  name="voucher_mode"/>
                    <field  name="state"/>
                </tree>
            </field>
        </record>
        <record id="view_hr_report_common_form" model="ir.ui.view">
            <field name="name">hr.common.report.form</field>
            <field name="model">hr.common.report</field>
            <field name="arch" type="xml">
                <form string="Rapports">
                    <field  invisible="1" name="workflow"/>
                    <field  invisible="1" name="code"/>
                    <header>
                        <button  attrs="{'invisible': ['|',('state','not in', ['draft']),('workflow','=', False)]}" class="oe_highlight"
                            name="common_report_confirm" string="Confirmer" type="workflow"/>
                        <button  attrs="{'invisible': ['|',('state','not in', ['draft']),('workflow','=', False)]}" name="common_report_cancel1"
                            string="Annuler" type="workflow"/>
                        <button  attrs="{'invisible': ['|',('state','not in', ['confirm']),('workflow','=', False)]}" class="oe_highlight"
                            name="common_report_done" string="Valider" type="workflow"/>
                        <button  attrs="{'invisible': ['|',('state','not in', ['confirm']),('workflow','=', False)]}" name="common_report_cancel2"
                            string="Annuler" type="workflow"/>
                        <button  attrs="{'invisible': ['|',('state','not in', ['done']),('workflow','=', False)]}" class="oe_highlight"
                            name="common_report_paid" string="Payé" type="workflow"/>
                        <button  attrs="{'invisible': ['|',('state','not in', ['done']),('workflow','=', False)]}" name="common_report_cancel3"
                            string="Annuler" type="workflow"/>
                        <button  attrs="{'invisible': ['|',('state','not in', ['paid']),('workflow','=', False)]}" name="common_report_cancel4"
                            string="Annuler" type="workflow"/>
<!--CNSS/AMO-->
                        <button  attrs="{'invisible': [('code','!=', 'cnss_amo')]}" name="action_print_cnss_amo_simple" string="Etat CNSS/AMO"
                            type="object"/>
                        <button  attrs="{'invisible': [('code','!=', 'cnss_amo')]}" name="action_print_cnss_amo_bordereau" string="Borderaux de paiement"
                            type="object"/>
<!-- AUDIT -->
                        <button  attrs="{'invisible': [('code','!=', 'audit')]}" class="oe_highlight" name="compute_audit_data" string="Mettre à jour"
                            type="object"/>
<!-- Anciennte -->
                        <button  attrs="{'invisible': [('code','!=', 'anciennete')]}" class="oe_highlight" name="action_print_anciennete"
                            string="Imprimer" type="object"/>
<!-- CS -->
                        <button  attrs="{'invisible': [('code','!=', 'cs')]}" name="action_print_cs_simple" string="Etat CSS" type="object"/>
                        <button  attrs="{'invisible': [('code','!=', 'cs')]}" name="action_print_cs_bordereau" string="Avis de versement" type="object"/>
<!-- IR -->
                        <button  attrs="{'invisible': [('code','!=', 'ir')]}" name="action_print_ir_simple" string="Etat IGR" type="object"/>
                        <button  attrs="{'invisible': [('code','!=', 'ir')]}" name="action_print_ir_bordereau" string="Avis de versement" type="object"/>
<!-- CIMR -->
                        <button  attrs="{'invisible': [('code','!=', 'cimr')]}" name="action_print_cimr_simple" string="Etat CIMR" type="object"/>
<!-- Mutuelle -->
                        <button  attrs="{'invisible': [('code','!=', 'mutuelle')]}" name="action_print_mutuelle_simple" string="Etat Mutuelle" type="object"/>                        
<!-- <button attrs="{'invisible': [('code','!=', 'cimr')]}" name="action_print_cimr_bordereau" string="Avis de versement" type="object"/> -->

                        <field  attrs="{'invisible': [('workflow','=', False)]}" name="state" statusbar_visible="draft,confirm,done,paid"
                            widget="statusbar"/>
                    </header>
                    <sheet>
                        <group col="4" colspan="4">
                            <group colspan="2" name="general">
                                <field  groups="l10n_ma_hr_payroll.group_paie_interface_helper" name="fiscalyear_id" widget="selection"/>
                                <field  domain="[('type_id.name','=',time.strftime('%Y')),('active','=',True)]"
                                    groups="l10n_ma_hr_payroll.group_paie_interface_helper" name="period_id" required="0" widget="selection"/>
                                <field  name="date_from" required="1"/>
                                <field  name="date_to" required="1"/>
                                <field  attrs="{'invisible': [('code_helper','!=', '')]}" name="type_id"/>
                                <field  invisible="1" name="code_helper"/>
                                <field  groups="l10n_ma_hr_payroll.group_paie_interface_state" name="payslip_state"/>
                            </group>
                            <group attrs="{'invisible': [('code','=', 'audit')]}" colspan="2" name="amounts" string="Montants">
<!-- IR -->
                                <button  attrs="{'invisible': ['|',('code','!=', 'ir'),('state','not in',['draft','confirm'])]}" class="oe_link oe_edit_only"
                                    colspan="2" name="compute_ir_data" string="(Update)" type="object"/>
                                <field  attrs="{'invisible': [('code','!=', 'ir')]}" name="ir_quittance"/>
                                <field  attrs="{'invisible': [('code','!=', 'ir')]}" name="ir_total_verse"/>
                                <field  attrs="{'invisible': [('code','!=', 'ir')]}" name="ir_principal"/>
                                <field  attrs="{'invisible': [('code','!=', 'ir')]}" name="ir_penalite"/>
                                <field  attrs="{'invisible': [('code','!=', 'ir')]}" name="ir_majoration"/>
                                <field  attrs="{'invisible': [('code','!=', 'ir')]}" name="ir_total"/>
<!-- CIMR -->
                                <button  attrs="{'invisible': ['|',('code','!=', 'cimr'),('state','not in',['draft','confirm'])]}" class="oe_link oe_edit_only"
                                    colspan="2" name="compute_cimr_data" string="(Update)" type="object"/>
                                <field  attrs="{'invisible': [('code','!=', 'cimr')]}" name="cimr_total_verse"/>
                                <field  attrs="{'invisible': [('code','!=', 'cimr')]}" name="cimr_principal"/>
                                <field  attrs="{'invisible': [('code','!=', 'cimr')]}" name="cimr_penalite"/>
                                <field  attrs="{'invisible': [('code','!=', 'cimr')]}" name="cimr_majoration"/>
                                <field  attrs="{'invisible': [('code','!=', 'cimr')]}" name="cimr_total"/>
<!-- Mutuelle -->
                                <button  attrs="{'invisible': ['|',('code','!=', 'mutuelle'),('state','not in',['draft','confirm'])]}" class="oe_link oe_edit_only"
                                    colspan="2" name="compute_mutuelle_data" string="(Update)" type="object"/>
                                <field  attrs="{'invisible': [('code','!=', 'mutuelle')]}" name="mutuelle_total_verse"/>
                                <field  attrs="{'invisible': [('code','!=', 'mutuelle')]}" name="mutuelle_principal"/>
                                <field  attrs="{'invisible': [('code','!=', 'mutuelle')]}" name="mutuelle_penalite"/>
                                <field  attrs="{'invisible': [('code','!=', 'mutuelle')]}" name="mutuelle_majoration"/>
                                <field  attrs="{'invisible': [('code','!=', 'mutuelle')]}" name="mutuelle_total"/>                                
<!-- CS -->
                                <button  attrs="{'invisible': ['|',('code','!=', 'cs'),('state','not in',['draft','confirm'])]}" class="oe_link oe_edit_only"
                                    colspan="2" name="compute_cs_data" string="(Update)" type="object"/>
                                <field  attrs="{'invisible': [('code','!=', 'cs')]}" name="cs_principal"/>
                                <field  attrs="{'invisible': [('code','!=', 'cs')]}" name="cs_penalite"/>
                                <field  attrs="{'invisible': [('code','!=', 'cs')]}" name="cs_majoration"/>
                                <field  attrs="{'invisible': [('code','!=', 'cs')]}" name="cs_total"/>
<!-- Anciennete -->
                                <button  attrs="{'invisible': [('code','!=', 'anciennete')]}" class="oe_link oe_edit_only" colspan="2"
                                    name="compute_anciennete_data" string="(Update)" type="object"/>
                                <field  attrs="{'invisible': [('code','!=', 'anciennete')]}" name="anciennete_total"/>
<!-- CNSS AMO -->
                                <field  attrs="{'invisible': [('code','!=', 'cnss_amo')]}" name="total_cnss"/>
                                <field  attrs="{'invisible': [('code','!=', 'cnss_amo')]}" name="total_amo"/>
                                <button  attrs="{'invisible': ['|',('code','!=', 'cnss_amo'),('state','not in',['draft','confirm'])]}"
                                    class="oe_link oe_edit_only" colspan="2" name="compute_cnss_amo_data" string="(Update)" type="object"/>
                                <field  attrs="{'invisible': [('code','!=', 'cnss_amo')]}" name="total_prestation_sociale_base"/>
                                <field  attrs="{'invisible': [('code','!=', 'cnss_amo')]}" name="total_prestation_sociale"/>
                                <field  attrs="{'invisible': [('code','!=', 'cnss_amo')]}" name="total_prestation_familiale_base"/>
                                <field  attrs="{'invisible': [('code','!=', 'cnss_amo')]}" name="total_prestation_familiale"/>
                                <field  attrs="{'invisible': [('code','!=', 'cnss_amo')]}" name="total_tax_formation_professionnelle_base"/>
                                <field  attrs="{'invisible': [('code','!=', 'cnss_amo')]}" name="total_tax_formation_professionnelle"/>
                                <field  attrs="{'invisible': [('code','!=', 'cnss_amo')]}" name="total_amo_base_base"/>
                                <field  attrs="{'invisible': [('code','!=', 'cnss_amo')]}" name="total_amo_base"/>
                                <field  attrs="{'invisible': [('code','!=', 'cnss_amo')]}" name="total_amo_solidarite_base"/>
                                <field  attrs="{'invisible': [('code','!=', 'cnss_amo')]}" name="total_amo_solidarite"/>
                            </group>
                            <group colspan="2" name="params">
                                <field  groups="base.group_multi_company" name="company_child" required="0"/>
                                <field  groups="base.group_multi_company" name="company_parent" required="0"/>
                            </group>
                            <group colspan="2" groups="l10n_ma_hr_payroll.group_paie_interface_department" name="department">
                                <div class="style_department">
                                    <separator  string="Limiter les départements"/>
                                    <field  name="departments_id" widget="many2many_checkboxes"/>
                                </div>
                            </group>
                            <group attrs="{'invisible': [('code','in', ['audit','anciennete'])]}" colspan="2" name="paiement" string="Paiement">
                                <field  attrs="{'invisible': [('state','not in',['draft']),('workflow','=', False)]}" name="voucher_ref"/>
                                <field  attrs="{'invisible': [('state','not in',['draft']),('workflow','=', False)]}" name="voucher_mode"/>
                                <field  attrs="{'invisible': [('state','not in',['draft']),('workflow','=', False)]}" name="voucher_date"/>
                            </group>
                            <group colspan="2" name="edition" string="Edition">
                                <field  name="edition_date"/>
                                <field  name="edition_city"/>
                            </group>
                            <group colspan="4" groups="base.group_multi_company">
                                <div class="style_company">
                                    <separator  colspan="4" string="Sociétés"/>
                                    <field  colspan="4" name="company_ids" nolabel="1" widget="many2many_tags"/>
                                </div>
                            </group>
                        </group>
                        <notebook attrs="{'invisible': [('code','!=', 'audit')]}" colspan="4">
                            <page string="Mobile">
                                <div>Les employés qui n'ont pas encore un numéro de téléphone mobile</div>
                                <field  colspan="4" name="emp_mobile_ids" nolabel="1"/>
                            </page>
                            <page string="Contrats">
                                <div>Les employés actifs qui n'ont pas un contrat valide pour cette période</div>
                                <field  colspan="4" name="emp_contract_ids" nolabel="1"/>
                            </page>
                            <page string="RIB">
                                <div>Les employés qui n'ont pas encore un RIB</div>
                                <field  colspan="4" name="emp_bank_ids" nolabel="1"/>
                            </page>
                            <page string="CNSS">
                                <div>Les employés qui ont une immatriculation de CNSS non conforme</div>
                                <field  colspan="4" name="emp_cnss_ids" nolabel="1"/>
                            </page>
                            <page string="CIMR">
                                <div>Les employés qui ont une immatriculation de CIMR non conforme</div>
                                <field  colspan="4" name="emp_cimr_ids" nolabel="1"/>
                            </page>
                            <page string="Postes">
                                <div>Les employés qui n'ont pas encore un poste</div>
                                <field  colspan="4" name="emp_job_ids" nolabel="1"/>
                            </page>
                            <page string="Département">
                                <div>Les employés qui n'ont pas encore attachés à un département</div>
                                <field  colspan="4" name="emp_department_ids" nolabel="1"/>
                            </page>
                            <page string="Payslips">
                                <div>Les employés qui ont des contrats valide pour cette période, mais aucun buletin de paie confirmé n'a pas été trouvé</div>
                                <field  colspan="4" name="emp_payslip_ids" nolabel="1"/>
                            </page>
                            <page string="SMIG">
                                <div>Les employés qui ont un taux horaire au dessous de SMIG</div>
                                <field  colspan="4" name="emp_smig_ids" nolabel="1"/>
                            </page>
                            <page string="Plusieurs Bulletins">
                                <div>Les employés qui ont plus d'un bulletin pour la période séléctionnée</div>
                                <field  colspan="4" name="emp_more_payslip_ids" nolabel="1"/>
                            </page>
                            <page string="Règlements">
                                <div>Les employés qui ont des bulletins de paie confirmé, mais aucun règlements n'a pas été affecté</div>
                                <field  colspan="4" name="emp_voucher_ids" nolabel="1"/>
                            </page>
                            <page groups="l10n_ma_hr_payroll.group_hr_menu_accounting" string="Comptabilité">
                                <div>Les employés qui ont des bulletins de paie confirmé, mais ils ne sont pas encore comptabilisés</div>
                                <field  colspan="4" name="emp_accounting_ids" nolabel="1"/>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field  name="message_follower_ids" widget="mail_followers"/>
                        <field  name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>
        <record id="hr_report_common_wizard_action" model="ir.actions.act_window">
            <field name="name">Rapports</field>
            <field name="res_model">hr.common.report</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem  action="hr_report_common_wizard_action" groups="kzm_base.group_unused" id="hr_report_common_menu"
            parent="menu_hr_main_reports" sequence="200"/>
<!-- Common Reports Type -->
        <record id="view_hr_common_report_type_tree" model="ir.ui.view">
            <field name="name">hr.common.report.type.tree</field>
            <field name="model">hr.common.report.type</field>
            <field name="type">tree</field>
            <field  eval="8" name="priority"/>
            <field name="arch" type="xml">
                <tree string="Types des rapports">
                    <field  name="name"/>
                    <field  name="code"/>
                    <field  name="workflow"/>
                </tree>
            </field>
        </record>
        <record id="view_hr_common_report_type_form" model="ir.ui.view">
            <field name="name">hr.common.report.type.form</field>
            <field name="model">hr.common.report.type</field>
            <field name="type">form</field>
            <field  eval="8" name="priority"/>
            <field name="arch" type="xml">
                <form string="Types des rapports">
                    <group colspan="4">
                        <field  name="name"/>
                        <field  name="code"/>
                        <field  name="workflow"/>
                    </group>
                </form>
            </field>
        </record>
        <record id="view_hr_common_report_type_search" model="ir.ui.view">
            <field name="name">hr.common.report.type.search</field>
            <field name="model">hr.common.report.type</field>
            <field name="type">search</field>
            <field  eval="8" name="priority"/>
            <field name="arch" type="xml">
                <search string="Types des rapports">
                    <field  name="name" select="True"/>
                </search>
            </field>
        </record>
        <record id="act_open_hr_common_report_type_view" model="ir.actions.act_window">
            <field name="name">Reports Types</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.common.report.type</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field  name="search_view_id" ref="view_hr_common_report_type_search"/>
            <field name="domain">[]</field>
            <field name="context">{}</field>
        </record>
        <record id="act_open_hr_common_report_type_view_form" model="ir.actions.act_window.view">
            <field  name="act_window_id" ref="act_open_hr_common_report_type_view"/>
            <field  eval="20" name="sequence"/>
            <field name="view_mode">form</field>
            <field  name="view_id" ref="view_hr_common_report_type_form"/>
        </record>
        <record id="act_open_hr_common_report_type_view_tree" model="ir.actions.act_window.view">
            <field  name="act_window_id" ref="act_open_hr_common_report_type_view"/>
            <field  eval="10" name="sequence"/>
            <field name="view_mode">tree</field>
            <field  name="view_id" ref="view_hr_common_report_type_tree"/>
        </record>
        <menuitem  action="act_open_hr_common_report_type_view" id="menu_hr_common_report_type" parent="hr_payroll.menu_hr_payroll_configuration"
            sequence="30"/>

<!-- Menu Actions Audit -->
        <record id="act_open_hr_common_report_audit_view" model="ir.actions.act_window">
            <field name="name">Audit</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.common.report</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('code','=','audit')]</field>
            <field name="context">{'default_code_helper' : 'audit'}</field>
        </record>
        <menuitem  action="act_open_hr_common_report_audit_view" groups="l10n_ma_hr_payroll.group_hr_menu_audit"
            id="menu_hr_common_report_audit" parent="menu_hr_main_reports" sequence="1"/>
<!-- Menu Actions AMO/CNSS -->
        <record id="act_open_hr_common_report_cnss_amo_view" model="ir.actions.act_window">
            <field name="name">CNSS et AMO</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.common.report</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('code','=','cnss_amo')]</field>
            <field name="context">{'default_code_helper' : 'cnss_amo'}</field>
        </record>
        <menuitem  action="act_open_hr_common_report_cnss_amo_view" groups="l10n_ma_hr_payroll.group_hr_menu_report"
            id="menu_hr_common_report_cnss_amo" parent="menu_hr_main_reports" sequence="2"/>
<!-- Menu Actions Impôt sur le revenu -->
        <record id="act_open_hr_common_report_ir_view" model="ir.actions.act_window">
            <field name="name">Impôt sur le revenu</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.common.report</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('code','=','ir')]</field>
            <field name="context">{'default_code_helper' : 'ir'}</field>
        </record>
        <menuitem  action="act_open_hr_common_report_ir_view" groups="l10n_ma_hr_payroll.group_hr_menu_report"
            id="menu_hr_common_report_ir" parent="menu_hr_main_reports" sequence="3"/>
<!-- Menu Actions CIMR -->
        <record id="act_open_hr_common_report_cimr_view" model="ir.actions.act_window">
            <field name="name">CIMR</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.common.report</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('code','=','cimr')]</field>
            <field name="context">{'default_code_helper' : 'cimr'}</field>
        </record>
        <menuitem  action="act_open_hr_common_report_cimr_view" groups="l10n_ma_hr_payroll.group_hr_menu_report"
            id="menu_hr_common_report_cimr" parent="menu_hr_main_reports" sequence="3"/>
<!-- Menu Actions Mutuelle -->
        <record id="act_open_hr_common_report_mutuelle_view" model="ir.actions.act_window">
            <field name="name">Mutuelle</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.common.report</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('code','=','mutuelle')]</field>
            <field name="context">{'default_code_helper' : 'mutuelle'}</field>
        </record>
        <menuitem  action="act_open_hr_common_report_mutuelle_view" groups="l10n_ma_hr_payroll.group_hr_menu_report"
            id="menu_hr_common_report_mutuelle" parent="menu_hr_main_reports" sequence="3"/>        
<!-- Menu Actions Contribution de solidarité -->
        <record id="act_open_hr_common_report_cs_view" model="ir.actions.act_window">
            <field name="name">Contribution de solidarité</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.common.report</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('code','=','cs')]</field>
            <field name="context">{'default_code_helper' : 'cs'}</field>
        </record>
        <menuitem  action="act_open_hr_common_report_cs_view" groups="l10n_ma_hr_payroll.group_hr_menu_report"
            id="menu_hr_common_report_cs" parent="menu_hr_main_reports" sequence="4"/>
<!-- Menu Actions Ancienneté -->
        <record id="act_open_hr_common_report_anciennete_view" model="ir.actions.act_window">
            <field name="name">Ancienneté</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.common.report</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('code','=','anciennete')]</field>
            <field name="context">{'default_code_helper' : 'anciennete'}</field>
        </record>
        <menuitem  action="act_open_hr_common_report_anciennete_view" groups="l10n_ma_hr_payroll.group_hr_menu_report"
            id="menu_hr_common_report_anciennete" parent="menu_hr_main_reports" sequence="1"/>

    </data>
</openerp>
