<?xml version="1.0" encoding="UTF-8" ?>
<openerp>
    <data>
        <record id="view_hr_payroll_statistics_report_graph" model="ir.ui.view">
            <field name="name">hr.payroll.statistics.report.graph</field>
            <field name="model">hr.payroll.statistics.report</field>
            <field name="arch" type="xml">
                <graph string="Analyse de la paie" type="pivot" stacked="True">
                    <field name="employee_id" type="row" />
                    <field name="slip_period_id" type="col" />
                    <field name="total" type="measure" />
                </graph>
            </field>
        </record>
        <record id="view_hr_payroll_statistics_report_search" model="ir.ui.view">
            <field name="name">hr.payroll.statistics.report.search</field>
            <field name="model">hr.payroll.statistics.report</field>
            <field name="type">search</field>
            <field name="priority" eval="8" />
            <field name="arch" type="xml">
                <search string="Statitiques sur la paie">
                    <field name="slip_period_id" select="True" />
                    <field name="employee_id" select="True" />
                    <field name="department_id" select="True" />
                    <field name="name" select="True" />
                    <filter name="this_period" domain="[('slip_period_id.date_start','=',time.strftime('%%Y-%%m-01'))]" string="This period" />
                    <separator />
                    <filter name="permanent" domain="[('contract_type','=','permanent')]" string="Permanent" />
                    <filter name="occasional" domain="[('contract_type','=','occasional')]" string="Occasional" />
                    <filter name="trainee" domain="[('contract_type','=','trainee')]" string="Trainee" />
                    <separator />
                    <filter name="rubrique" domain="[('rubrique_id','!=',False),('total','>',0)]" string="Primes et indémnités" />
                    <filter name="avantage" domain="[('avantage_id','!=',False),('total','>',0)]" string="Avantages" />
                    <filter name="avance" domain="[('avance_id','!=',False),('total','>',0)]" string="Avances" />
                    <filter name="cotisation" domain="[('cotisation_id','!=',False),('total','>',0)]" string="Cotisations" />
                    <filter name="holiday" domain="[('holiday_status_id','!=',False),('quantity','>',0)]" string="Holidays" />
                    <separator />
                    <filter name="cotisation_patronale" domain="[('category','=','rp')]" string="Cotisations patronales" />
                    <filter name="gain_salariale" domain="[('category','=','gs')]" string="Gains de l'employe" />
                    <filter name="retenu_salariale" domain="[('category','=','rs')]" string="Retenu salariale" />
                    <separator />
                    <filter name="net" domain="[('code','=','NET')]" string="Net" />
                    <filter name="net_imposable" domain="[('code','=','NET_IMPOSABLE')]" string="Net imposable" />
                    <filter name="base_salariale" domain="[('code','=','BASE_SALARIALE')]" string="Base salariale" />
                    <filter name="brut" domain="[('code','=','BRUT')]" string="Brut" />
                    <filter name="brut_imposable" domain="[('code','=','BRUT_IMPOSABLE')]" string="Brut imposable" />
                    <filter name="ir_net" domain="[('code','=','IR_NET')]" string="IR net" />
                    <filter name="ir_brut" domain="[('code','=','IR_BRUT')]" string="IR brut" />
                    <filter name="cf" domain="[('code','=','CF')]" string="Charges familiales" />
                    <group expand="1" string="Group By">
                        <filter string="Basé sur" name="based_on" context="{'group_by':'based_on'}" />
                        <filter string="État" context="{'group_by':'state'}" />
                        <filter string="Type de contrat" context="{'group_by':'contract_type'}" />
                        <separator/>
                        <filter string="Société" context="{'group_by':'company_id'}" groups="base.group_multi_company" />
                        <filter string="Employé" context="{'group_by':'employee_id'}" />
                        <filter string="Contrat" context="{'group_by':'contract_id'}" />
                        <filter string="Départment" context="{'group_by':'department_id'}" />
                        <filter string="Poste" context="{'group_by':'job_id'}" />
                        <filter string="Contribution" domain="[('register_id','!=',False)]" context="{'group_by':'register_id'}" />
                    </group>
                </search>
            </field>
        </record>
        <record model="ir.actions.act_window" id="act_open_hr_payroll_statistics_report_view">
            <field name="name">Statitiques sur la paie</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.payroll.statistics.report</field>
            <field name="view_type">form</field>
            <field name="view_mode">graph</field>
            <field name="search_view_id" ref="view_hr_payroll_statistics_report_search" />
            <field name="domain">[]</field>
            <field name="context">{}</field>
        </record>
        <menuitem id="menu_hr_payroll_statistics_report" parent="menu_hr_payroll_reporting" sequence="20" action="act_open_hr_payroll_statistics_report_view"
        />
    </data>
</openerp>
