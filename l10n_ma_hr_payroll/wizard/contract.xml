<?xml version="1.0" encoding="UTF-8" ?>
<openerp>
    <data>
<!-- Generate Contract on employee form -->
        <record id="view_hr_contract_wizard_form" model="ir.ui.view">
            <field name="name">hr.contract.wizard.form</field>
            <field name="model">hr.contract.wizard</field>
            <field name="type">form</field>
            <field eval="8" name="priority"/>
            <field name="arch" type="xml">
                <form string="Générer les contrats">
                    <group col="8" colspan="4" groups="hr.group_hr_user">
                        <group colspan="4" string="Général">
                            <field name="based_on" invisible="1" />
                            <field name="based_on_id" widget="selection"/>
                            <field attrs="{'invisible': [('based_on','not in', ['fixed_days'])],'required': [('based_on','in', ['fixed_days'])]}"
                                name="nbr_days_declared"/>
                            <field attrs="{'invisible': [('based_on','not in', ['fixed_hours'])],'required': [('based_on','in', ['fixed_hours'])]}"
                                name="nbr_hours_declared"/>
                            <field
                                attrs="{'invisible': [('based_on','not in', ['fixed_days','worked_days','attended_days', 'timesheet_days'])],'required': [('based_on','in', ['fixed_days','worked_days','attended_days', 'timesheet_days'])]}"
                                name="salary_by_day"/>
                            <field
                                attrs="{'invisible': [('based_on','not in', ['fixed_hours','worked_hours','attended_hours','timesheet_hours'])],'required': [('based_on','in', ['fixed_hours','worked_hours','attended_hours','timesheet_hours'])]}"
                                name="salary_by_hour"/>
                            <field
                                attrs="{'invisible': [('based_on','not in', ['fixed_days','fixed_hours'])],'required': [('based_on','in', ['fixed_days','fixed_hours'])]}"
                                name="salary_net_effectif"/>
                                <field  name="default_hours_on_worked_day" groups="l10n_ma_hr_payroll.group_advanced_options"/>
                                <field  name="default_hours_on_holiday" groups="l10n_ma_hr_payroll.group_advanced_options"/>
                                <field  name="default_hours_on_leave" groups="l10n_ma_hr_payroll.group_advanced_options" invisible="1" />
                          </group>
                        <group colspan="4" string="Autres">
                            <field name="type_id"/>
                            <field name="working_hours" required="True" widget="selection"/>
                            <label for="date_start" string="Date from (Duration)"/>
                            <div>
                                <field class="oe_inline" name="date_start"/>
                                <field class="oe_inline" name="date_end"/>
                            </div>
                            <field name="voucher_mode"/>
                            <field name="company_id"/>
                        </group>
                        <group attrs="{'invisible': [('based_on','not in', ['fixed_days','fixed_hours','worked_days','worked_hours'])]}" colspan="4"
                            string="Leaves">
                            <field
                                attrs="{'required': [('based_on','not in', ['fixed_days','fixed_hours','worked_days','worked_hours']),('nb_holidays_by_month','>', 0)]}"
                                name="date_start_cron"/>
                            <field attrs="{'required': [('based_on','not in', ['fixed_days','fixed_hours','worked_days','worked_hours'])]}"
                                name="nb_holidays_by_month"/>
                            <field
                                attrs="{'required': [('based_on','not in', ['fixed_days','fixed_hours','worked_days','worked_hours']),('nb_holidays_by_month','>', 0)]}"
                                name="date_begin_holiday"/>
                        </group>
                        <group colspan="4" string="Périodes">
                            <label for="trial_date_start" string="Periode d'essai"/>
                            <div>
                                <field class="oe_inline" name="trial_date_start"/>
                                <label class="oe_inline" string=" - "/>
                                <field class="oe_inline" name="trial_date_end"/>
                            </div>
                            <label for="preavis_duration" string="Durée de préavis"/>
                            <div>
                                <field class="oe_inline" name="preavis_duration"/>
                                <label class="oe_inline" string=" mois."/>
                            </div>
                        </group>
                    </group>
                    <footer>
                        <button class="oe_highlight" icon="STOCK_EXECUTE" name="action_generate" string="Générer" type="object"/>
                        ou
                        <button class="oe_link" special="cancel" string="Annuler" type="special"/>
                    </footer>
                </form>
            </field>
        </record>
        <record id="action_hr_contract_wizard_view" model="ir.actions.act_window">
            <field name="name">Générer les contrats</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.contract.wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="domain">[]</field>
            <field name="context">{}</field>
            <field name="target">new</field>
        </record>
        <record id="wizard_hr_contract_wizard" model="ir.values">
            <field name="name">Générer les contrats</field>
            <field name="key">action</field>
            <field name="key2">client_action_multi</field>
            <field name="model">hr.employee</field>
            <field eval="'ir.actions.act_window,' + str(ref('action_hr_contract_wizard_view'))" name="value"/>
        </record>
<!-- Generate Contract on employee form -->
        <record id="view_hr_contract_close_form" model="ir.ui.view">
            <field name="name">hr.contract.close.form</field>
            <field name="model">hr.contract.close</field>
            <field name="type">form</field>
            <field eval="8" name="priority"/>
            <field name="arch" type="xml">
                <form string="Clôturer les contrats">
                    <group col="8" colspan="4">
                        <field colspan="8" invisible="1" name="based_on"/>
                        <group colspan="4" groups="hr.group_hr_user">
                            <field name="date"/>
                            <field name="motif"/>
                        </group>
                        <group colspan="4" groups="hr.group_hr_user">
                            <field name="solde_tout_compte"/>
                            <label attrs="{'invisible': ['|',('based_on','not in', ['fixed_days','fixed_hours']),('solde_tout_compte','=',False)]}"
                                for="period" string="Période travaillée"/>
                            <div attrs="{'invisible': ['|',('based_on','not in', ['fixed_days','fixed_hours']),('solde_tout_compte','=',False)]}">
                                <field class="oe_inline" name="declared_period" readonly="1"/>
                                -
                                <field attrs="{'required': [('based_on','in', ['fixed_days','fixed_hours'])]}" class="oe_inline" name="minus_period"/>
                                =
                                <field class="oe_inline" name="period" readonly="1"/>
                                <label attrs="{'invisible': [('based_on','!=', 'fixed_hours')]}" class="oe_inline" string="hours."/>
                                <label attrs="{'invisible': [('based_on','!=', 'fixed_days')]}" class="oe_inline" string="days."/>
                            </div>
                            <label attrs="{'invisible': [('solde_tout_compte','=', False)]}" for="legal_leaves" string="Reste des congés payés"/>
                            <div attrs="{'invisible': [('solde_tout_compte','=', False)]}">
                                <field class="oe_inline" name="legal_leaves" readonly="1"/>
                                +
                                <field attrs="{'required': [('solde_tout_compte','=', True)]}" class="oe_inline" name="legal_leaves_addon"/>
                                =
                                <field class="oe_inline" name="remaining_leaves" readonly="1"/>
                            </div>
                            <field attrs="{'invisible': [('solde_tout_compte','=', False)], 'required': [('solde_tout_compte','=', True)]}"
                                name="prime_preavis"/>
                            <field attrs="{'invisible': [('solde_tout_compte','=', False)], 'required': [('solde_tout_compte','=', True)]}"
                                name="prime_licenciement"/>
                        </group>
                    </group>
                    <footer>
                        <button class="oe_highlight" name="action_generate" string="Close contract" type="object"/>
                        ou
                        <button class="oe_link" special="cancel" string="Annuler" type="special"/>
                    </footer>
                </form>
            </field>
        </record>
        <record id="action_hr_contract_close_view" model="ir.actions.act_window">
            <field name="name">Clôturer les contrats</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.contract.close</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="domain">[]</field>
            <field name="context">{}</field>
            <field name="target">new</field>
        </record>
        <record id="close_hr_contract_close" model="ir.values">
            <field name="name">Clôturer les contrats</field>
            <field name="key">action</field>
            <field name="key2">client_action_multi</field>
            <field name="model">hr.contract</field>
            <field eval="'ir.actions.act_window,' + str(ref('action_hr_contract_close_view'))" name="value"/>
        </record>
    </data>
</openerp>
