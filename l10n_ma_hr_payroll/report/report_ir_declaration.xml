<?xml version="1.0" encoding="utf-8" ?>
<openerp>
    <data noupdate="0">
        <template id="report_ir_declaration">
            <t t-call="report.html_container">
                <t t-as="p" t-foreach="docs">
                    <t  t-set="data_lines" t-value="p.get_lines(['BRUT_IMPOSABLE','NET_IMPOSABLE','CF','IR'],['name'],['otherid','nbr_person_charged'])"/>
                    <t t-call="kzm_base.kzm_page_layout">
                        <div class="page">
                            <h4 style="text-align: center;">Etat IGR
                                <br/>
                                De
                                <span  options="{'format' : '%d/%m/%Y'}" t-field="p.date_from"/>
                                à
                                <span  options="{'format' : '%d/%m/%Y'}" t-field="p.date_to"/>
                            </h4>
                            <table class="table table-condensed payroll-table-bordered table-bordered">
                                <thead>
                                    <tr>
                                        <th>Matricule</th>
                                        <th>Nom et prénom</th>
                                        <th>Montant du revenu brut imposable</th>
                                        <th>Montant du revenu net imposable</th>
                                        <th>Nombre de réductions pour charges de famille</th>
                                        <th>Charges familiales</th>
                                        <th>Montant de l'IR prélevé</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-as="line" t-foreach="data_lines">
                                        <td>
                                            <span  t-esc="line['payslip'].get('otherid','')"/>
                                        </td>
                                        <td>
                                            <span  t-esc="line['employee'].get('name')"/>
                                        </td>
                                        <td style="text-align: right">
                                            <span  t-esc="line['cumul'].get('BRUT_IMPOSABLE')"/>
                                        </td>
                                        <td style="text-align: right">
                                            <span  t-esc="line['cumul'].get('NET_IMPOSABLE')"/>
                                        </td>
                                        <td style="text-align: right">
                                            <span  t-esc="line['payslip'].get('nbr_person_charged')"/>
                                        </td>
                                        <td style="text-align: right">
                                            <span  t-esc="line['cumul'].get('CF')"/>
                                        </td>
                                        <td style="text-align: right">
                                            <span  t-esc="line['cumul'].get('IR')"/>
                                        </td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="2">
                                            Total
                                        </td>
                                        <td style="text-align: right">
                                            <span  t-esc="sum([line['cumul'].get('BRUT_IMPOSABLE') for line in data_lines])"/>
                                        </td>
                                        <td style="text-align: right">
                                            <span  t-esc="sum([line['cumul'].get('NET_IMPOSABLE') for line in data_lines])"/>
                                        </td>
                                        <td style="payroll-black"></td>
                                        <td style="text-align: right">
                                            <span  t-esc="sum([line['cumul'].get('CF') for line in data_lines])"/>
                                        </td>
                                        <td style="text-align: right">
                                            <span  t-esc="sum([line['cumul'].get('IR') for line in data_lines])"/>
                                        </td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </t>
                </t>
            </t>
        </template>
        <template id="report_ir_declaration_versement">
            <t t-as="p" t-foreach="docs">
                <div class="page">
                    <img  src="l10n_ma_hr_payroll/static/img/ir.jpg"
                        style="display: block; margin: 0px; padding: 0px; position: absolute; top: 0px; left: 0px; z-index: 4; width: 941px; height: 1332px"/>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 299px; left: 402px; width: 29px; height: 13px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p.date_from[5:7][1]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 299px; left: 374px; width: 29px; height: 13px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p.date_from[5:7][0]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 297px; left: 614px; width: 29px; height: 13px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p.date_from[:4][3]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 298px; left: 583px; width: 29px; height: 13px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p.date_from[:4][2]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 298px; left: 552px; width: 29px; height: 13px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p.date_from[:4][1]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 299px; left: 519px; width: 29px; height: 13px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p.date_from[:4][0]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 384px; left: 243px; width: 29px; height: 13px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_vat(p)[0]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 383px; left: 265px; width: 29px; height: 13px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_vat(p)[1]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 383px; left: 284px; width: 29px; height: 13px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_vat(p)[2]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 383px; left: 308px; width: 29px; height: 13px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_vat(p)[3]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 383px; left: 331px; width: 29px; height: 13px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_vat(p)[4]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 383px; left: 354px; width: 29px; height: 13px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_vat(p)[5]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 383px; left: 374px; width: 29px; height: 13px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_vat(p)[6]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 383px; left: 396px; width: 29px; height: 13px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_vat(p)[7]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 449px; left: 62px; width: 830px; height: 60px; z-index:30; text-align: left; vertical-align:middle; font-weight: bold; font-size: 14px; text-indent: 400px; line-height: 25px;"><span  t-esc="p._get_main_company(p).partner_id.contact_address.strip().replace('\n',', ')"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 480px; left: 655px; width: 232px; height: 22px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_main_company(p).city or ''"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 429px; left: 520px; width: 367px; height: 22px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_main_company(p).name"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 575px; left: 374px; width: 29px; height: 16px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_tv(p)[0]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 575px; left: 404px; width: 29px; height: 16px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_tv(p)[1]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 575px; left: 434px; width: 29px; height: 16px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_tv(p)[2]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 575px; left: 464px; width: 29px; height: 16px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_tv(p)[3]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 575px; left: 496px; width: 29px; height: 16px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_tv(p)[4]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 575px; left: 526px; width: 29px; height: 16px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_tv(p)[5]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 575px; left: 560px; width: 29px; height: 16px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_tv(p)[6]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 575px; left: 591px; width: 29px; height: 16px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_tv(p)[7]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 575px; left: 620px; width: 29px; height: 16px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_tv(p)[8]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 575px; left: 650px; width: 29px; height: 16px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p._get_tv(p)[9]"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 682px; left: 297px; width: 181px; height: 24px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p.ir_penalite"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 682px; left: 720px; width: 181px; height: 24px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p.ir_total"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 682px; left: 76px; width: 181px; height: 24px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p.ir_principal"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 682px; left: 512px; width: 181px; height: 24px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p.ir_majoration"/></div>
                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 711px; left: 59px; width: 832px; height: 58px; z-index:30; text-align: left; vertical-align:middle; font-weight: bold; font-size: 14px; text-indent: 370px; line-height: 23px;"><span  t-esc="p.ir_total"/></div>

                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 776px; left: 576px; width: 164px; height: 24px; z-index:30; text-align: center; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p.edition_city"/></div>

                    <div
                        style="margin: 0px; padding: 0px; position: absolute; top: 778px; left: 771px; width: 158px; height: 21px; z-index:30; text-align: left; vertical-align:middle; font-weight: bold; font-size: 14px;"><span  t-esc="p.edition_date"/></div>
                </div>
            </t>
        </template>
    </data>
</openerp>
